<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Story Compass</title>
    <style>
        body {
            background-color: #1a2639; /* Dark Navy */
            color: #f4e4bc; /* Parchment */
            font-family: 'Georgia', serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            text-align: center;
            -webkit-tap-highlight-color: transparent;
        }

        h1 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: #d4af37;
        }

        .category-selector {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 30px;
            width: 90%;
        }

        .cat-btn {
            background: transparent;
            border: 2px solid #5c6b7f;
            color: #a0b0c5;
            padding: 10px 12px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s ease;
            outline: none;
        }

        .cat-btn.active {
            border-color: #d4af37;
            color: #1a2639;
            background-color: #d4af37;
            font-weight: bold;
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.4);
        }

        .compass-container {
            position: relative;
            width: 260px;
            height: 260px;
            border: 8px solid #d4af37;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: radial-gradient(circle, #2c3e50 0%, #1a2639 100%);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            margin-bottom: 40px;
        }

        /* Decorative Ring */
        .compass-container::before {
            content: '';
            position: absolute;
            width: 230px;
            height: 230px;
            border: 2px dashed #5c6b7f;
            border-radius: 50%;
            animation: spin-slow 20s linear infinite;
        }

        .result-text {
            font-size: 1.8rem;
            font-weight: bold;
            color: #fff;
            z-index: 10;
            max-width: 80%;
            word-wrap: break-word;
            min-height: 2.5rem;
            line-height: 1.2;
        }

        .spin-btn {
            background-color: #d4af37;
            color: #1a2639;
            border: none;
            padding: 15px 60px;
            font-size: 1.3rem;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 2px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: transform 0.1s;
            -webkit-appearance: none; /* Fix for iOS buttons */
        }

        .spin-btn:active {
            transform: scale(0.95);
            background-color: #c4a030;
        }

        @keyframes spin-slow {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .flash {
            animation: flash-anim 0.4s ease-out;
        }

        @keyframes flash-anim {
            0% { opacity: 0.2; transform: scale(0.8); color: #d4af37; }
            50% { opacity: 1; transform: scale(1.1); color: #fff; }
            100% { opacity: 1; transform: scale(1); }
        }
    </style>
</head>
<body>

    <h1>The Story Compass</h1>

    <div class="category-selector">
        <button class="cat-btn active" onclick="setCategory('adventureNoun', this)">Adventure</button>
        <button class="cat-btn" onclick="setCategory('funNoun', this)">Fun Noun</button>
        <button class="cat-btn" onclick="setCategory('action', this)">Action</button>
        <button class="cat-btn" onclick="setCategory('adj', this)">Describe</button>
    </div>

    <div class="compass-container">
        <div class="result-text" id="result">Ready?</div>
    </div>

    <button class="spin-btn" onclick="spin()">SPIN</button>

    <script>
        [cite_start]// Data from Spinners.pdf [cite: 27, 28, 29]
        const data = {
            adventureNoun: [
                "RUMOUR", "LANTERN", "PATH", "STORM", "ECHO", "KINGDOM", "QUEST", "FEATHER", 
                "SECRET", "BRIDGE", "ISLE", "RIFT", "SHADOW", "MEMORY", "GATE", "TRAIL", 
                "SANCTUARY", "STONE", "DAWN", "MAP", "TIDE", "GARDEN", "WHISPER", "WORLD", 
                "COMPASS", "LAKE", "LETTER", "FOREST", "SOUND", "LIGHT", "PORTAL", "PUZZLE", 
                "MOUNTAIN", "TOWER", "SCROLL", "PACT", "SIGNAL", "BURROW", "PASSAGE", "SMILE", 
                "CHALLENGE", "FRIEND", "CREATURE", "DREAM", "ARTIFACT", "STRANGER", "MYSTERY", "GUEST"
            ],
            funNoun: [
                "PANCAKE", "WHISKER", "FART", "PIPSQUEAK", "CRUMB", "BUBBLE", "SCONE", "SPROUT", 
                "MOP", "PEBBLE", "SAUSAGE", "SCRIBBLE", "LUNCH", "TEACUP", "WAFFLE", "PUDDLE", 
                "SANDWICH", "HUG", "BUTTON", "TOADSTOOL", "ACORN", "PICKLE", "UNDIES", "VOMIT", 
                "NOODLE", "MARSHMALLOW", "TEACHER", "DUCKLING", "FAIRY", "TEAPOT", "SOCK", "PUPPY", 
                "BUMBLE", "MUFFIN", "SNAIL", "CUPCAKE", "TROUSERS", "BISCUIT", "SPROCKET", "HAMSTER", 
                "TURNIP", "CHUCKLE", "SNEEZE"
            ],
            action: [
                "CLIMB", "FALL", "RETURN", "APPROACH", "ASK", "TELL", "WARN", "REFUSE", "INVITE", 
                "OFFER", "AGREE", "SILENT", "DOUBT", "CHALLENGE", "PROMISE", "DECIDE", "FORGET", 
                "CROSS", "WANDER", "IMAGINE", "REMEMBER", "ESCAPE", "RESTLESS", "CHASE", "HOPE", 
                "LEAD", "FEAR", "FOLLOW", "TURN", "CLOSE", "OPEN", "TWIST", "PULL", "DROP", 
                "PUSH", "LIFT", "CARRY", "SUMMON", "PONDER", "MERGE", "CREATE", "REVEAL", "HIDE", 
                "CHANGE", "REALISE", "OBSERVE", "TRUST"
            ],
            adj: [
                "SOGGY", "BOUNCY", "YAWNING", "ZIPPY", "SNICKERING", "UNRULY", "DIZZY", "CHATTY", 
                "CLUMSY", "PUZZLED", "GIGGLY", "SKITTERING", "TUMBLEDOWN", "SQUEAKY", "GOBSMACKED", 
                "PLUCKY", "SPICY", "QUIRKY", "RAMBUNCTIOUS", "WHIFFLED", "KOOKY", "RUMBLING", "GOOFY", 
                "SNAZZY", "FLUSTERED", "TICKLISH", "PICKLED", "MISCHIEVOUS", "CRANKY", "LOPSIDED", 
                "GRUMBLING", "SPARKLY", "WONKY", "BAFFLED", "SNEEZING", "WOBBLY", "CHUNKY", 
                "INCREDIBLE", "WONDEROUS", "UNCOMFORTABLE", "STINKY", "IMAGINED", "IMPOSSIBLE", 
                "SHY", "SMOOSHY", "BEDRAGGLED", "PUGGISH", "CHEEKY", "HOLLOW", "CRIMSON", "GLACIAL", 
                "WANDERING", "STAR-TOUCHED", "ECHOING", "SECRET", "STORM-BOUND", "GLIMMERING", 
                "STRAYING", "CLEVER", "BLOOMING", "STRANDED", "DISTANT", "GOLDEN", "SILENT", 
                "SHADOW", "CRUEL", "TIMELESS", "MOONLIT", "RISING", "BROKEN", "RELUCTANT"
            ]
        };

        let currentCategory = 'adventureNoun';
        let isSpinning = false;

        function setCategory(cat, btnElement) {
            // Update the tracker variable
            currentCategory = cat;
            
            // Visual Update: Remove 'active' from all buttons
            const allButtons = document.querySelectorAll('.cat-btn');
            allButtons.forEach(b => b.classList.remove('active'));
            
            // Add 'active' to the clicked button
            btnElement.classList.add('active');
            
            // Reset the text
            const resultElement = document.getElementById('result');
            resultElement.innerText = "Ready?";
            resultElement.style.opacity = "0.5";
        }

        function spin() {
            if (isSpinning) return; // Prevent double clicking
            isSpinning = true;

            const list = data[currentCategory];
            const resultElement = document.getElementById('result');
            resultElement.style.opacity = "1";
            
            // Animation loop
            let counter = 0;
            const totalSpins = 15; // How many words flash before stopping
            
            const interval = setInterval(() => {
                // Pick a random word just for the visual effect
                const randomTemp = list[Math.floor(Math.random() * list.length)];
                resultElement.innerText = randomTemp;
                
                counter++;
                if (counter > totalSpins) {
                    clearInterval(interval);
                    finalizeSpin(list);
                }
            }, 60); // Speed of the flicker (milliseconds)
        }

        function finalizeSpin(list) {
            const finalWord = list[Math.floor(Math.random() * list.length)];
            const resultElement = document.getElementById('result');
            
            resultElement.innerText = finalWord;
            
            // Trigger the "Flash" animation
            resultElement.classList.remove('flash');
            void resultElement.offsetWidth; // This hack forces the animation to restart
            resultElement.classList.add('flash');
            
            isSpinning = false;
        }
    </script>
</body>
</html>
